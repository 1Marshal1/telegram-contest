<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    .anim {
      position: absolute;
      top: 50px;
      left: 50px;
    }
  </style>
</head>
<body>


<button class="anim">Animate</button>
<!--<button id="left"> <- </button>-->
<!--<button id="right"> -> </button>-->


<div style="width: 100%;padding-top: 5rem;display: flex;justify-content: center">
  <canvas id="canvas" style="border: 1px solid black"></canvas>
</div>


<script>
  const canvas = document.getElementById('canvas')
  const c = canvas.getContext('2d')
  const X_STEP = 100

  canvas.width = 1600
  canvas.height = 600

  canvas.style.width = 800 + 'px'
  canvas.style.height = 300 + 'px'
</script>

<script>
  class Circle {
    constructor(x, y, radius) {
      this.x = x
      this.y = y
      this.defaultRadius = radius
      this.radius = 0
    }

    update() {
      if (Math.abs(pos.x - this.x) < this.defaultRadius) {
        this.radius = this.defaultRadius - Math.abs(pos.x - this.x)
      } else {
        this.radius = 0
      }
      this.draw()
    }

    draw() {
      c.strokeStyle = 'blue'
      c.fillStyle = 'white'
      c.beginPath()
      c.arc(this.x, this.y, this.radius, 0, Math.PI * 2)
      c.fill()
      c.stroke()
    }
  }

</script>

<script>
  function yAxis() {
    c.beginPath()
    c.save()
    c.fillStyle = '#000'

    c.strokeStyle = '#ccc'
    c.font = 'normal 20px Helvetica,sans-serif'
    c.lineWidth = 2

    // columns
    for (let i = 0; i < canvas.height; i += canvas.height / 5) {
      c.fillText(i.toString(), 0, canvas.height - i)
      c.moveTo(0, i)
      c.lineTo(canvas.width, i)
    }

    c.stroke()
    c.restore()
    c.closePath()
  }

  function xAxis() {
    c.beginPath()
    c.save()
    c.fillStyle = '#000'

    c.strokeStyle = '#ccc'
    c.font = 'normal 20px Helvetica,sans-serif'
    c.lineWidth = 2

    let x = X_STEP

    coords.forEach(() => {
      c.fillText(x.toString(), x, canvas.height)
      x += X_STEP
    })

    c.stroke()
    c.restore()
    c.closePath()
  }

  function lines() {
    c.save()
    c.beginPath()
    c.lineWidth = 4
    c.strokeStyle = 'blue'
    let x = 0

    c.beginPath()
    coords.forEach(y => {
      c.lineTo(x, y)
      x += X_STEP
    })
    c.stroke()
    c.closePath()
    c.restore()
  }

</script>

<script>
  const coords = [
    40, 150, 450, 30, 120, 345, 546, 345, 232, 235, 112, 321, 543, 32, 213,
    140, 1150, 1450, 30, 2120, 345, 546, 345, 232, 235, 112, 321, 543, 32, 213,
    40, 150, 450, 30, 120, 345, 546, 345, 232, 235, 112, 321, 543, 32, 213,
    40, 150, 450, 30, 120, 345, 546, 345, 232, 235, 112, 321, 543, 32, 213
  ].map(y => canvas.height - y)


  let offsetX = 0
  let offsetY = 0
  const step = 90
  let dx = 0
  let dy = 0
  let dirx
  let diry

  document.addEventListener('keydown', event => {
    if (event.key === 'ArrowLeft') {
      offsetX += step
      dirx = 'left'
    } else if (event.key === 'ArrowRight') {
      offsetX -= step
      dirx = 'right'
    } else if (event.key === 'ArrowUp') {
      offsetY += step
      diry = 'up'
    } else if (event.key === 'ArrowDown') {
      offsetY -= step
      diry = 'down'
    }
  })


  function animate() {
    requestAnimationFrame(animate)
    c.clearRect(0, 0, canvas.width, canvas.height)

    yAxis()

    c.save()

    if (dx !== offsetX) {
      dx = dirx === 'left' ? dx + 10 : dx - 10
    }
    //
    // if (dy !== offsetY) {
    //   dy = diry === 'up' ? dy + 10 : dy - 10
    // }

    c.transform(1, 0, 0, 1, dx, offsetY)
    xAxis()

    lines()
    c.restore()
  }

  animate()

</script>
</body>
</html>